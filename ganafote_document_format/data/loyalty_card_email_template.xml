<?xml version="1.0" ?>
<odoo>
    <!-- Mail template are declared in a NOUPDATE block
        so users can freely customize/delete them -->
    <data noupdate="0">
        <!--Email template -->
        <record
            id="ganafote_document_format.loyalty_card_email_template"
            model="mail.template"
        >
            <field name="name">Programa de Puntos</field>
            <field name="model_id" ref="loyalty.model_loyalty_card"/>
            <field name="subject">Puntos actuales con {{ object.program_id.company_id.name }}</field>
            <field name="email_from">{{ object.program_id.company_id.email }}</field>
            <field name="partner_to">{{ object._get_mail_partner().id }}</field>
            <field name="lang">{{ object._get_mail_partner().lang }}</field>
            <field name="description">Sent to customer with coupon information</field>
            <field name="body_html" type="html">
                <div id="header">
                    <div id="header_fig" style="width:100%;">
                        <a href="https://erp.ganafote.com">
                            <img
                                class="img-fluid o_we_custom_image"
                                src="https://i.postimg.cc/sDb9Wgxg/cabecera.png"
                                width="1096"
                                height="453"
                                style="border-style:none;box-sizing:border-box;display:inline-block;height:auto;max-width:100%;vertical-align:middle;"
                            />
                        </a>
                    </div>
                </div>
                <div
                    id="content"
                    style="clear:both;width:80%;margin:10px auto;font-size:1.5em;color:black;"
                >
                    <div id="text_points">
                        <t t-if="object._get_mail_partner().name">
                            Felicidades <t t-out="object._get_mail_partner().name or ''">Brandon
                            Freeman</t>,
                            <br/>
                        </t>
                        <br/>
                        <span>Su saldo actual de puntos es:
                            <b>
                                <span t-esc="object.points"/>
                            </b>
                        </span>

                    </div>
                    <br/>
                    <t t-set="number_of_rewards" t-value="0"/>
                    <t t-foreach="object.program_id.reward_ids" t-as="reward">
                        <t t-if="reward.required_points &lt;= object.points">
                            <t t-set="number_of_rewards" t-value="number_of_rewards +1"/>
                        </t>
                    </t>
                    <t t-if="number_of_rewards &gt; 0">
                        <t t-if="number_of_rewards &lt; 2">
                            <span>Puede canjearlos por la siguiente recompensa:</span>
                        </t>
                        <t t-else="">
                            <span>Puede canjearlos por una de las siguientes recompensas:</span>
                        </t>
                        <table border="0" cellpadding="0" cellspacing="0"
                               style="width:100%; margin:0px auto; background:#ffffff; color:#333333;">
                            <tbody>
                                <t t-foreach="object.program_id.reward_ids" t-as="reward">
                                    <tr>
                                        <td valign="top" style="text-align: left;">

                                            <t t-if="reward.required_points &lt;= object.points">
                                                <span style=" color: #875A7B; font-weight: bold;"
                                                      t-esc="reward.description">Descripción de la recompensa
                                                </span>
                                                <br/>
                                            </t>
                                            <t t-else="">
                                                <span style=" color: #9b9b9b; font-weight: bold;"
                                                      t-esc="reward.description">Descripción de la recompensa
                                                </span>
                                            </t>

                                        </td>

                                            <td valign="top" style="text-align: center; ">
                                                <t t-if="reward.required_points &lt;= object.points">
                                                <span style="color: #875A7B;">Por
                                                    <span t-esc="reward.required_points"/>
                                                    Puntos
                                                </span>
                                                </t>
                                                <t t-else="">
                                                     <span style="color: #9b9b9b;">Por
                                                    <span t-esc="reward.required_points"/>
                                                    Puntos
                                                </span>
                                                </t>
                                            </td>

                                    </tr>
                                </t>
                            </tbody>
                        </table>
                        <br/>
                    </t>
                    Gracias,
                    <t t-if="object._get_signature()">
                        <br/>
                        <t t-out="object._get_signature() or ''">--<br/>Mitchell Admin
                        </t>
                    </t>

                </div>
                <div id="footer">
                    <a href="https://ganafote.com">
                        <img
                            class="img-fluid o_we_custom_image"
                            src="https://i.postimg.cc/wjfyC6Rd/banner-abajo.png"
                            alt=""
                        />
                    </a>
                </div>

            </field>
            <field name="report_template" ref=""/>
            <field name="report_name"></field>
            <field name="auto_delete" eval="True"/>
        </record>
    </data>
</odoo>
